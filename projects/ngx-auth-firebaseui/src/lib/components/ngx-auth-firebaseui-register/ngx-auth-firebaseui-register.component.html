<div fxLayout="column" id="register">

  <div fxLayout="column" fxLayoutAlign="center center" id="register-form-wrapper">

    <div [@animateStagger]="{ value: '50' }" id="register-form">

      <div *ngIf="logoUrl" class="logo">
        <img [@animate]="{ value: '*', params: { x: '50px' } }" [src]="logoUrl" alt="logo">
      </div>

      <div [@animate]="{ value: '*', params: { x: '-50px' } }" class="title">{{i18nMessageService.register.titleText}}</div>

      <form [@animate]="{value:'*',params:{duration:'300ms',y:'100px'}}" [formGroup]="registerForm" name="registerForm"
            novalidate>

        <mat-form-field [@animate]="{ value: '*', params: { x: '50px' } }" [appearance]="appearance">
          <input [placeholder]="i18nMessageService.register.nameText" formControlName="name" matInput/>
          <mat-icon [color]="color" matSuffix>person</mat-icon>
          <mat-error>
            {{i18nMessageService.register.nameErrorRequiredText}}
          </mat-error>
        </mat-form-field>

        <mat-form-field [@animate]="{ value: '*', params: { x: '50px' } }" [appearance]="appearance">
          <input [placeholder]="i18nMessageService.register.emailText" formControlName="email" matInput autocomplete="username"/>
          <mat-icon [color]="color" matSuffix>email</mat-icon>
          <mat-error *ngIf="registerForm.get('email')?.hasError('required')">
            {{i18nMessageService.register.emailErrorRequiredText}}
          </mat-error>
          <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
            {{i18nMessageService.register.emailErrorPatternText}}
          </mat-error>
        </mat-form-field>

        <mat-form-field [@animate]="{ value: '*', params: { x: '50px' } }" [appearance]="appearance">
          <input [placeholder]="i18nMessageService.register.passwordText" formControlName="password" matInput type="password" autocomplete="new-password"/>
          <mat-icon [color]="color" matSuffix>lock</mat-icon>
          <mat-error  *ngIf="registerForm.get('password')?.hasError('required')">
            {{i18nMessageService.register.passwordErrorRequiredText}}
          </mat-error>
          <mat-error  *ngIf="registerForm.get('password')?.hasError('minlength')">
            {{i18nMessageService.register.passwordErrorMinLengthText}}
          </mat-error>
          <mat-error  *ngIf="registerForm.get('password')?.hasError('maxlength')">
            {{i18nMessageService.register.passwordErrorMaxLengthText}}
          </mat-error>
        </mat-form-field>

        <mat-form-field [@animate]="{ value: '*', params: { x: '50px' } }" [appearance]="appearance">
          <input [placeholder]="i18nMessageService.register.passwordConfirmationText" formControlName="passwordConfirm" matInput type="password" autocomplete="new-password"/>
          <mat-icon [color]="color" matSuffix>lock</mat-icon>
          <mat-error *ngIf="registerForm.get('passwordConfirm')?.hasError('required')">
            {{i18nMessageService.register.passwordConfirmationErrorRequiredText}}
          </mat-error>
          <mat-error
            *ngIf="
              !registerForm.get('passwordConfirm')?.hasError('required') &&
              registerForm.get('passwordConfirm')?.hasError('passwordsNotMatching')
            ">
            {{i18nMessageService.register.passwordErrorMatchText}}
          </mat-error>
        </mat-form-field>

        <div *ngIf="this.tosUrl">
          <mat-checkbox aria-label="{{i18nMessageService.register.termsAndConditionsText}}" formControlName="tos" required>
            <span>{{i18nMessageService.register.termsAndConditionsText}}</span>
            <a target="_blank" [href]="this.tosUrl">
                {{i18nMessageService.register.termsAndConditionsLinkText}}
            </a>
          </mat-checkbox>
        </div>

        <div *ngIf="this.privacyPolicyUrl">
          <mat-checkbox aria-label="{{i18nMessageService.register.privacyPolicyText}}" formControlName="privacyPolicy" required>
            <span>{{i18nMessageService.register.privacyPolicyText}}</span>
            <a target="_blank" [href]="this.privacyPolicyUrl">
                {{i18nMessageService.register.privacyPolicyLinkText}}
            </a>
          </mat-checkbox>
        </div>

        <button (click)="createAccount()"
                [color]="colorAccent"
                [disabled]="registerForm.invalid"
                aria-label="CREATE AN ACCOUNT"
                class="submit-button"
                id="createAccountButton"
                mat-raised-button>
          {{i18nMessageService.register.createAccountButtonText}}
        </button>
      </form>

      <div [@animate]="{value:'*',params:{duration:'300ms',y:'100px'}}" class="register" fxLayout="column"
           fxLayoutAlign="center center">
        <span [@animate]="{ value: '*', params: { x: '100px' } }" class="text">
          {{i18nMessageService.register.alreadyHaveAccountText}}
        </span>
        <button (click)="onLoginRequested.emit()"
                [@animate]="{ value: '*', params: { x: '-100px' } }"
                [color]="colorAccent"
                id="loginButton"
                mat-button
                type="button">
          {{i18nMessageService.register.loginButtonText}}
        </button>
      </div>

    </div>
  </div>
</div>
